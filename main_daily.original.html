<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="The Daily Movie Guessing Game (original backup)" />
    <title>FilmIQ - Daily Guessing Game (original backup)</title>
    <link rel="icon" type="image/x-icon" href="/assets/icon.png" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/pong.css" />
    <style>
      body {
        background: url("/assets/BG.jpg") no-repeat center center fixed;
        background-size: cover;
        background-color: rgb(83, 83, 83);
        height: 100vh;
        color: rgb(255, 255, 255);
      }
    </style>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3640217869179703"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="countdown-container">
      <p id="countdown-timer">Next film in 00h 00m 00s</p>
    </div>

    <div class="game-container">
      <div id="displayNameOverlay" class="overlay">
        <div class="overlay-content">
          <h2>Welcome to FilmIQ!</h2>
          <p>Please enter a display name to join the leaderboard:</p>
          <input
            id="displayName"
            placeholder="Your Name"
            maxlength="20"
            class="guess-input"
          />
          <button id="saveDisplayName" class="btn">Save</button>
        </div>
      </div>

      <!-- Stage 1: Short Sound Clip -->
      <div
        id="stage-1"
        class="stage-container active-stage"
        data-tooltip="Good Luck! Guess the movie from this audio snippet."
      >
        <div class="stage">
          <h2></h2>
          <audio controls preload="auto">
            <source src="" type="audio/mp3" class="audioplayer" />
            Your browser does not support the audio element.
          </audio>
          <div class="custom-dropdown">
            <img src="/assets/search.png" alt="Search" class="search-icon" />
            <input
              type="text"
              id="guess-stage-1"
              class="guess-input"
              placeholder="Search for the Movie or Submit to Skip"
              autocomplete="off"
              data-tooltip="Type your guess here—autocomplete’s your co-star!"
            />
            <div id="custom-dropdown-list" class="dropdown-list"></div>
          </div>
          <button id="submit-guess-1" class="btn">Submit</button>
          <div id="feedback-1"></div>
          <div id="leaderboardDisplay" class="leaderboard-display">
            <div class="leaderboard-item">
              <span class="leaderboard-label">Your All-Time Avg Guesses:</span>
              <span id="yourAvg" class="leaderboard-value">N/A</span>
            </div>
            <div class="leaderboard-item">
              <span class="leaderboard-label">Today's Avg Guesses:</span>
              <span id="todayAvg" class="leaderboard-value">N/A</span>
            </div>
            <div class="leaderboard-item">
              <span class="leaderboard-label">Your Score Today:</span>
              <span id="yourToday" class="leaderboard-value"
                >Not Played Yet</span
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Stage 2: Four Movie Frames -->
      <div
        id="stage-2"
        class="stage-container"
        data-tooltip="Four frames, one film—spot the story in the stills."
      >
        <div class="stage">
          <div class="LevelHeader"></div>
          <div class="frames">
            <img src="" alt="Frame 1" onclick="" />
            <img src="" alt="Frame 2" onclick="" />
            <img src="" alt="Frame 3" onclick="" />
            <img src="" alt="Frame 4" onclick="" />
          </div>
          <div id="imageOverlay" class="image-overlay" onclick="closeImage()">
            <img id="overlayImage" src="" alt="Enlarged Image" />
          </div>
          <div class="custom-dropdown">
            <img src="/assets/search.png" alt="Search" class="search-icon" />
            <input
              type="text"
              id="guess-stage-2"
              class="guess-input"
              placeholder="Search for the Movie or Submit to Skip"
              autocomplete="off"
              data-tooltip="Type your guess here—autocomplete’s your co-star!"
            />
            <div id="custom-dropdown-list" class="dropdown-list"></div>
          </div>
          <button id="submit-guess-2" class="btn">Submit</button>
          <div id="feedback-2"></div>
        </div>
      </div>

      <!-- Stage 3: Short Video Clip -->
      <div
        id="stage-3"
        class="stage-container"
        data-tooltip="Lights, camera, action! A short clip to crack the case."
      >
        <div class="stage">
          <video controls preload="auto">
            <source src="" type="video/mp4" />
            Your browser does not support the video element.
          </video>
          <div class="custom-dropdown">
            <img src="/assets/search.png" alt="Search" class="search-icon" />
            <input
              type="text"
              id="guess-stage-3"
              class="guess-input"
              placeholder="Search for the Movie or Submit to Skip"
              autocomplete="off"
              data-tooltip="Type your guess here—autocomplete’s your co-star!"
            />
            <div id="custom-dropdown-list" class="dropdown-list"></div>
          </div>
          <button id="submit-guess-3" class="btn">Submit</button>
          <div id="feedback-3"></div>
        </div>
      </div>

      <!-- Stage 4: Longer Video Clip -->
      <div
        id="stage-4"
        class="stage-container"
        data-tooltip="The big reveal: nail it with this longer scene."
      >
        <div class="stage">
          <video controls preload="auto">
            <source src="" type="video/mp4" />
            Your browser does not support the video element.
          </video>
          <div class="custom-dropdown">
            <img src="/assets/search.png" alt="Search" class="search-icon" />
            <input
              type="text"
              id="guess-stage-4"
              class="guess-input"
              placeholder="Search for the Movie or Submit to Skip"
              autocomplete="off"
              data-tooltip="Type your guess here—autocomplete’s your co-star!"
            />
            <div id="custom-dropdown-list" class="dropdown-list"></div>
          </div>
          <button id="submit-guess-4" class="btn">Submit</button>
          <div id="feedback-4"></div>
        </div>
      </div>

      <!-- Navigation Pane -->
      <div class="navigation-pane">
        <button
          class="nav-icon"
          onclick="goToStage(1)"
          data-tooltip="Back to the soundwave—trust your ears."
        >
          <img src="/assets/sound.png" alt="Stage 1" />
        </button>
        <button
          class="nav-icon"
          onclick="goToStage(2)"
          data-tooltip="Rewind to the frames—four shots to fame."
        >
          <img src="/assets/framesicon.png" alt="Stage 2" />
        </button>
        <button
          class="nav-icon"
          onclick="goToStage(3)"
          data-tooltip="Short clip checkpoint—motion is your muse."
        >
          <img src="/assets/videoplayer8s.png" alt="Stage 3" />
        </button>
        <button
          class="nav-icon"
          onclick="goToStage(4)"
          data-tooltip="The final cut—go big or go home."
        >
          <img src="/assets/videoplayer30s.png" alt="Stage 4" />
        </button>
        <div class="nav-icon" id="navIcon1">
          <span class="tooltip-bubble"></span>
        </div>
      </div>

      <div id="sidebar" class="sidebar">
        <div id="menu-toggle" class="menu-toggle">
          <img
            src="/assets/hamburger-icon.png"
            alt="Menu"
            class="hamburger-icon"
          />
        </div>
        <div class="menu-items">
          <div class="menu-item" id="daily-mode-btn">
            <img
              src="/assets/daily-mode-icon.png"
              alt="Daily Mode"
              class="menu-icon"
            />
            <div class="text-wrapper"><span>Daily Mode</span></div>
          </div>
          <div class="menu-item" id="endless-mode-btn">
            <img
              src="/assets/endless-mode-icon.png"
              alt="Endless Mode"
              class="menu-icon"
            />
            <div class="text-wrapper"><span>Endless Mode</span></div>
          </div>
          <div class="menu-item" id="leaderboard-btn">
            <img src="/assets/podium.gif" alt="Leaderboard" class="menu-icon" />
            <div class="text-wrapper"><span>Leaderboard</span></div>
          </div>
          <div class="menu-item" id="home-btn">
            <img src="/assets/homebutton.png" alt="Go Home" class="menu-icon" />
            <div class="text-wrapper"><span>Home</span></div>
          </div>
          <div class="menu-item" id="discord-btn">
            <img
              src="/assets/discord-icon.png"
              alt="Join Discord"
              class="menu-icon"
            />
            <div class="text-wrapper"><span>Join the Discord</span></div>
          </div>
          <label class="tooltip-toggle">
            <input type="checkbox" id="tooltip-toggle" checked />
            <span class="slider"></span>
            <span class="tooltip-label">Toggle Tooltips</span>
          </label>
        </div>
      </div>

      <div id="help-toggle" class="help-toggle">
        <img
          src="/assets/helpicon.png"
          alt="Get Help"
          class="help-icon"
          id="help-btn"
        />
      </div>
      <div id="disc-toggle" class="disc-toggle">
        <img
          src="/assets/discordicon.png"
          alt="JoinDiscord"
          class="disc-icon"
          id="disc-btn"
        />
      </div>
    </div>

    <div id="help-popup" class="help-container">
      <div class="help-content">
        <span class="close-btn" onclick="closeHelp()">×</span>
        <img src="/assets/help.png" alt="Help" />
      </div>
    </div>

    <div id="leaderboard-popup" class="help-container">
      <div class="leaderboard-content">
        <span class="close-btn" onclick="closeLeaderboard()">×</span>
        <h2>Top 25 Players</h2>
        <table id="leaderboard-table">
          <thead>
            <tr>
              <th>Rank</th>
              <th>Username</th>
              <th>Avg Stage</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body"></tbody>
        </table>
      </div>
    </div>

    <div id="completion-screen" class="completion-container">
      <div class="completion-content">
        <h2 id="completion-message"></h2>
        <img src="" alt="Movie Poster" />
        <div>
          <button onclick="window.location.href='https://filmiq.app/shuffle'">
            Try the Endless Mode?
          </button>
        </div>
        <div class="right-section">
          <h3>Share Your Result</h3>
          <label>
            <input type="checkbox" id="show-movie-title" /> Include Movie Title
          </label>
          <div id="result-text">Your result preview will appear here.</div>
          <button id="share-result-btn">Share My Result</button>
        </div>
      </div>
    </div>

    <div id="score"></div>

    <div id="pong-overlay">
      <div id="pong-start-screen">
        <h2 id="pong-start-message">
          Congrats on finding the Pong Easter egg!
        </h2>
        <button id="play-pong">Play</button>
      </div>
      <canvas id="pongCanvas" width="800" height="400"></canvas>
      <button id="close-pong">X</button>
      <audio id="pong-audio" loop>
        <source src="/assets/8bit-drum-track.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>
      <input
        type="range"
        id="pong-volume"
        min="0"
        max="1"
        step="0.01"
        value="0.1"
      />
    </div>

    <script src="js/script.js"></script>
    <script src="js/pong.js"></script>
    <script>
      const pongOverlay = document.getElementById("pong-overlay");
      const pongStartScreen = document.getElementById("pong-start-screen");
      const playPongBtn = document.getElementById("play-pong");
      const closePongBtn = document.getElementById("close-pong");
      const pongCanvas = document.getElementById("pongCanvas");
      const pongAudio = document.getElementById("pong-audio");
      const pongVolume = document.getElementById("pong-volume");
      const submitButtons = [
        document.getElementById("submit-guess-1"),
        document.getElementById("submit-guess-2"),
        document.getElementById("submit-guess-3"),
        document.getElementById("submit-guess-4"),
      ];
      const guessInputs = [
        document.getElementById("guess-stage-1"),
        document.getElementById("guess-stage-2"),
        document.getElementById("guess-stage-3"),
        document.getElementById("guess-stage-4"),
      ];

      pongAudio.volume = 0.1;

      submitButtons.forEach((btn, index) => {
        btn.addEventListener("click", () => {
          const guess = guessInputs[index].value.toLowerCase().trim();
          if (guess === "pong....??" && !window.isPongRunning) {
            pongOverlay.style.opacity = "0";
            pongOverlay.style.display = "flex";
            pongStartScreen.style.display = "block";
            pongCanvas.style.display = "none";
            guessInputs[index].value = "";
            document.getElementById(`feedback-${index + 1}`).textContent = "";
            requestAnimationFrame(() => {
              pongOverlay.classList.add("fade-in");
            });
          }
        });
      });

      playPongBtn.addEventListener("click", () => {
        pongStartScreen.style.display = "none";
        pongCanvas.style.display = "block";
        if (!window.isPongRunning) {
          window.isPongRunning = true;
          pongAudio.play();
          draw();
        }
      });

      closePongBtn.addEventListener("click", () => {
        pongOverlay.classList.remove("fade-in");
        pongOverlay.classList.add("fade-out");
        pongAudio.pause();
        pongAudio.currentTime = 0;
        setTimeout(() => {
          pongOverlay.style.display = "none";
          pongOverlay.classList.remove("fade-out");
          pongStartScreen.style.display = "block";
          pongCanvas.style.display = "none";
          window.isPongRunning = false;
        }, 500);
      });

      pongVolume.addEventListener("input", () => {
        pongAudio.volume = pongVolume.value;
      });
    </script>
  </body>
</html>
